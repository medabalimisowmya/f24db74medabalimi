extends layout

block content
  h1= title

  //- Hardcode results array
  -
    var results = [
      { device_name: 'Power Drill', model: 'PDX100', power_usage: 600 },
      { device_name: 'Electric Saw', model: 'ES300', power_usage: 800 },
      { device_name: 'Soldering Iron', model: 'SI50', power_usage: 50 },
      //{device_name: 'XYZ', model: 'MNO', power_usage:100}
    ];

  //- Outer container
  .container-fluid
  .row 
    //- Loop over each item in results, adding index to use for the buy function
    each item, index in results
      - let destination = `dispatch(\"/devices/update?id=${item._id}\")`
      .col-sm-2(onclick=`buy(${index})`) // Add onclick event here
        h3 #{item.device_name}
        p Model: #{item.model}
        p Power Usage: #{item.power_usage}W
        button.btn.btn-primary.ml-1(onclick=destination) Update

  //- JavaScript function to handle the buy action
  script.
    function dispatch(path) {
      window.location.href = path;
    }
    function buy(index) {
      alert(`You purchased item ${index}`);
    }
